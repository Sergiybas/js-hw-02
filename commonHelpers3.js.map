{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nconst refs = {\n  form: document.querySelector('.form'),\n  delayInput: document.querySelector('input[name=\"delay\"]'),\n  stepInput: document.querySelector('input[name=\"step\"]'),\n  amountInput: document.querySelector('input[name=\"amount\"]'),\n  submitButton: document.querySelector('button[type=\"submit\"]'),\n};\n\nrefs.form.addEventListener('submit', function (event) {\n  event.preventDefault();\n\n  const delay = Number(refs.delayInput.value);\n  const step = Number(refs.stepInput.value);\n  const amount = Number(refs.amountInput.value);\n\n  const promises = [];\n\n  for (let i = 1; i <= amount; i++) {\n    const currentDelay = delay + (i - 1) * step;\n    const promise = createPromise(i, currentDelay)\n      .then(({ position, delay }) => {\n        iziToast.show({\n          message: `Promise ${position} resolved after ${delay}ms`,\n          messageSize: '50',\n          backgroundColor: 'green',\n          position: 'topCenter',\n          timeout: 15000,\n        });\n        console.log(`Promise ${position} resolved after ${delay}ms`);\n      })\n      .catch(({ position, delay }) => {\n        iziToast.show({\n          message: ` Promise ${position} rejected after ${delay}ms`,\n          messageSize: '50',\n          backgroundColor: 'red',\n          position: 'topCenter',\n          timeout: 15000,\n        });\n        console.log(`Promise ${position} rejected after ${delay}ms`);\n      });\n    promises.push(promise);\n  }\n\n  Promise.all(promises).then(() => {\n    refs.form.reset();\n  });\n});\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n}\n"],"names":["refs","event","delay","step","amount","promises","i","currentDelay","promise","createPromise","position","iziToast","resolve","reject","shouldResolve"],"mappings":"wIAEA,MAAMA,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,WAAY,SAAS,cAAc,qBAAqB,EACxD,UAAW,SAAS,cAAc,oBAAoB,EACtD,YAAa,SAAS,cAAc,sBAAsB,EAC1D,aAAc,SAAS,cAAc,uBAAuB,CAC9D,EAEAA,EAAK,KAAK,iBAAiB,SAAU,SAAUC,EAAO,CACpDA,EAAM,eAAc,EAEpB,MAAMC,EAAQ,OAAOF,EAAK,WAAW,KAAK,EACpCG,EAAO,OAAOH,EAAK,UAAU,KAAK,EAClCI,EAAS,OAAOJ,EAAK,YAAY,KAAK,EAEtCK,EAAW,CAAA,EAEjB,QAASC,EAAI,EAAGA,GAAKF,EAAQE,IAAK,CAChC,MAAMC,EAAeL,GAASI,EAAI,GAAKH,EACjCK,EAAUC,EAAcH,EAAGC,CAAY,EAC1C,KAAK,CAAC,CAAE,SAAAG,EAAU,MAAAR,KAAY,CAC7BS,EAAS,KAAK,CACZ,QAAS,WAAWD,CAAQ,mBAAmBR,CAAK,KACpD,YAAa,KACb,gBAAiB,QACjB,SAAU,YACV,QAAS,IACnB,CAAS,EACD,QAAQ,IAAI,WAAWQ,CAAQ,mBAAmBR,CAAK,IAAI,CACnE,CAAO,EACA,MAAM,CAAC,CAAE,SAAAQ,EAAU,MAAAR,KAAY,CAC9BS,EAAS,KAAK,CACZ,QAAS,YAAYD,CAAQ,mBAAmBR,CAAK,KACrD,YAAa,KACb,gBAAiB,MACjB,SAAU,YACV,QAAS,IACnB,CAAS,EACD,QAAQ,IAAI,WAAWQ,CAAQ,mBAAmBR,CAAK,IAAI,CACnE,CAAO,EACHG,EAAS,KAAKG,CAAO,CACtB,CAED,QAAQ,IAAIH,CAAQ,EAAE,KAAK,IAAM,CAC/BL,EAAK,KAAK,OACd,CAAG,CACH,CAAC,EAED,SAASS,EAAcC,EAAUR,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACU,EAASC,IAAW,CACtC,MAAMC,EAAgB,KAAK,OAAM,EAAK,GAEtC,WAAW,IAAM,CACXA,EACFF,EAAQ,CAAE,SAAAF,EAAU,MAAAR,CAAK,CAAE,EAE3BW,EAAO,CAAE,SAAAH,EAAU,MAAAR,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CACH"}